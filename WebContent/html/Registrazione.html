<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>

/*- prova */


$(document).ready(function(){
	
	$('#input').keypress(function (e) {
		  if (e.which == 13) {
			  $("input").next().focus();
		    return false;  
		  }
	});
	

	$("#confermaPassword").blur(function(){
		 var ck_password = /^[A-Za-z0-9]{8,12}$/;// controllo sulla validitï¿½ della password
		 var password = document.getElementById("password").value;
		 var confermapassword = document.getElementById("confermaPassword").value;	  
		 		 
		  // controllo sugli input password
		  if (!ck_password.test(password)) {
				document.getElementById("print").innerHTML= "La password deve contenere almeno 8 e massimo 12 caratteri alfanumerici.";
				$('#password').css("borderColor","red");
				$('#password').focus();
				return false; 
		  }
		  if (confermapassword != password) {
			  document.getElementById("print").innerHTML= "Le password non coincidono.";
			  $('#confermaPassword').css("borderColor","red");
			  $('#confermaPassword').focus();
			  return false; 
		  }
		  if(confermapassword == password && ck_password.test(password)){
			  document.getElementById("print").innerHTML= "";
			    $('#password').css("borderColor","");
			    $('#confermaPassword').css("borderColor","");
				$('#date').focus();
				return false; 
		  }

	});
	
	
	
	$('input#submit').click( function() {
		
		
		  $('form')[0].checkValidity();
		
// 		  {
// 		      validateEvents: 'submit', 
// 		      reset: function(){
// 		        $('textarea, input', this).reset();
// 		      }
// 		  }
		  
		  
			 $.post("../RegistrazioneServlet", { 
				 
				 	
				 nome: $("#nome").val(),
				 cognome:$("#cognome").val(),
				 telefono:$("#telefono").val(),
				 email:$("#email").val(),
				 password:$("#password").val(),
				 data_nascita:$("#data_nascita").val(),
				 genere:$("input[name='genere']:checked").val()

					}, function(data, status) {
			     if (status == "success")
			    	 
			    	 var x=data.id;

			    	 if(x == "registrato"){		    		 
			    		 alert("Email gia in uso.");
			    	 }
			    	 if(x == "false"){		    		 
			    		 alert("Errore di registrazione. \nCompila i campi correttamente.");
			    	 }
			    	 if(x== "true"){
			    		 window.location.replace("../jsp_result/registrazione_success.jsp");
			    	 }

			     });


	 });
	
	
  
});

</script>
<style type="text/css">
body{
	text-align: center;
	background: fixed;
	background: no-repeat;
	background-image: url("../immagini/spiaggia.jpg");

	
}
#principale{
	 
	background-color: rgb(0,0,0); /* Fallback color */
  	background-color: rgba(0,0,0, 0.6); /* Black w/opacity/see-through */
 	color: white;
 	font-weight: bold;
	width: 50%;
	position: relative;
	left: 25%;
	padding: 25px;

}
input:hover{
	border-color: #00FF99;
}
.pulsanti {
	border-color: #00FF99;
}

.pulsanti:hover {
	background-color: #00FF99;
	color: black;
}

</style>
<meta charset="ISO-8859-1">
	<title>Registrati a MSBeach</title>
    <link Rel="icon" type="image/ico" href="../immagini/logo.png">
</head>
<body>
<div id="principale">
<img alt="logo" src="../immagini/logo.png" id="logo" width="100px" height="100px" >
<h1>Registrati a MSBeach </h1>
<hr>
<form id="form" method="post">

	 <span style="font-variant: small-caps">Nome </span><br /><input type="text" name="nome"id="nome" placeholder="Mario" required><br /><br />
	 <span style="font-variant: small-caps">Cognome</span><br /><input type="text" name="cognome" id="cognome" placeholder="Rossi" required><br /><br />
	 <span style="font-variant: small-caps">Telefono</span><br /><input type="text" name="telefono" id="telefono" placeholder="+39 ..." required><br /><br />
	 <span style="font-variant: small-caps">E-mail</span><br /><input type="email" name="email" required id="email" placeholder="mario.rossi@gmail.com"><br /><br />
	 <span style="font-variant: small-caps">Password</span><br /><input type="password" name="password" id="password" required><br /><br />
	 <span style="font-variant: small-caps">Conferma Password</span><br /><input type="password" name="confermaPassword" id="confermaPassword" required><br />
	<p id="print" style="color: red;font-size:x-small;"></p>
	
	<fieldset>
	<legend>Dati anagrafici</legend>
	<span style="font-variant: small-caps">Data di nascita</span><br /> <input type="date" name="data_nascita" id="data_nascita" required><br /><br />
	<span style="font-variant: small-caps">Sesso:</span><br>
	<input style="font-style: " type="radio" name="genere" value="1" id="sessoM" checked="checked">Maschio
	<input type="radio" name="genere" value="2">Femmina
	<input type="radio" name="genere" value="3">Altro
	</fieldset><br />
		
	<hr>
	<br />
	<input type="reset"value="Resetta" class="pulsanti">
	<input type="submit" value="Iscriviti" id="submit" class="pulsanti">

</form>
</div>
</body>
</html>